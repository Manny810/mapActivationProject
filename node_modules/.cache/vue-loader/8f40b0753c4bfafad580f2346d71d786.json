{"remainingRequest":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/src/components/MapActivation.vue?vue&type=style&index=0&id=3507ea92&scoped=true&lang=css&","dependencies":[{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/src/components/MapActivation.vue","mtime":1639781554698},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mfavela_activation_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hbm5vdGF0b3JfaW1hZ2UgewogICAgLyogbWF4LXdpZHRoOjEwMCU7ICovCiAgICAvKiBtYXgtaGVpZ2h0OjEwMCU7ICovCiAgICAvKiBkaXNwbGF5OmlubGluZTsgKi8KICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgb2JqZWN0LWZpdDpub25lOyAvKiBuZXZlciByZXNjYWxlIHVwICovIAp9Ci5hbm5vdGF0b3JfaW1hZ2Vfc21hbGwgewogIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgbWF4LWhlaWdodDogMjAwcHg7CiAgLyptYXgtd2lkdGg6IDQwMHB4OyAqLwogIG9iamVjdC1maXQ6IHNjYWxlLWRvd247IC8qIG5ldmVyIHJlc2NhbGUgdXAgKi8gCn0KLmFubm90YXRvcl9jYW52YXMgewogICAgLyogYm9yZGVyOjBweCBzb2xpZCAjZDNkM2QzOyAqLwogICAgLyogbWF4LXdpZHRoOjEwMCU7Ki8KICAgIC8qIG1heC1oZWlnaHQ6MTAwJTsgKi8KICAgIHBvc2l0aW9uOmFic29sdXRlOyBsZWZ0OjQ0cHg7CiAgICAvKiBkaXNwbGF5OjsgICovCiAgICAvKiBmb3Igbm93IG5vdCBzaG93aW5nIGl0IHRvIHRyeSB0byBmaXggY2VudGVyaW5nIGlzc3VlLi4uKi8KfQo="},{"version":3,"sources":["MapActivation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MapActivation.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n      <h2>Map Activation Component</h2>\n      <img :class=\"annotator_image_small\" :src=\"image\" ref=\"image\" \n                @load=\"draw_initial_contents\" tabindex='1' @keyup.esc=\"emit('esc')\" />\n        <canvas class=\"annotator_canvas\" ref=\"canvas\" @keyup.esc=\"emit('esc')\" tabindex='2' \n                @mouseover=\"hover(true)\" @mouseleave=\"hover(false)\" />\n  </div>\n</template>\n\n<script>\n//import axios from \"axios\";\n//import { eventBus } from \"../main\";\n\nexport default {\n  name: \"MapActivation\",\n  props: [\"image\", \"array\", \"showActivation\"],\n  watch: {\n      showActivation: function(){\n          if (this.showActivation){\n              this.drawActivation(); \n          } else { \n              this.clearActivation(); \n          }\n      }\n  }, \n  data() {\n    return {};\n  },\n  created: function() {\n  },\n  methods: { \n    draw_initial_contents(){\n        //let paper = this.paper;\n        let img = this.$refs.image; \n        let cnv = this.$refs.canvas;\n\n\n        // size of element outside\n        cnv.height = img.height;\n        cnv.width = img.width;\n        var activation = this.generateArrayImage(this.array, img.width, img.height); \n        var ctx = cnv.getContext('2d')\n        var idata = ctx.createImageData(cnv.width, cnv.height); \n        idata.data.set(activation); \n        ctx.putImageData(idata, 0, 0);  \n    }, \n    clearActivation(){\n        let cnv = this.$refs.canvas; \n        var ctx = cnv.getContext('2d'); \n        var img = ctx.createImageData(cnv.width, cnv.height); \n        for (var i = 0; i < img.data.length; i++){\n            img.data[i] = 0; \n        }\n        ctx.putImageData(img, 0, 0); \n    }, \n    drawActivation(){\n        let img = this.$refs.image;\n        let cnv = this.$refs.canvas; \n        var activation = this.generateArrayImage(this.array, img.width, img.height); \n        var ctx = cnv.getContext('2d')\n        var idata = ctx.createImageData(cnv.width, cnv.height); \n        idata.data.set(activation); \n        ctx.putImageData(idata, 0, 0); \n    }, \n    generateArrayImage(array, width, height){\n        var array_width = array[0].length, \n        array_height = array.length; \n        var data = new Uint8ClampedArray(width * height * 4);  \n        for (var x = 0; x < width; x++){\n            for (var y = 0; y < height; y++){\n                var pos = (y * width + x) * 4; \n                var array_x = Math.floor(width / array_width); \n                var array_y = Math.floor(height / array_height); \n                var temp = array[Math.floor(y/array_y)][Math.floor(x / array_x)]\n                data[pos] = 255; // Set the color to red\n                data[pos + 1] = 0;\n                data[pos + 2] = 0; \n                data[pos + 3] = parseInt(temp * 255); \n            }\n        }\n        var image = document.createElement(\"img\");\n        image.src = data; \n        return data; \n    },\n\n  },\n};\n</script>\n\n<style scoped>\n.annotator_image {\n    /* max-width:100%; */\n    /* max-height:100%; */\n    /* display:inline; */\n    position:relative;\n    object-fit:none; /* never rescale up */ \n}\n.annotator_image_small {\n  width: auto !important;\n  height: auto !important;\n  max-height: 200px;\n  /*max-width: 400px; */\n  object-fit: scale-down; /* never rescale up */ \n}\n.annotator_canvas {\n    /* border:0px solid #d3d3d3; */\n    /* max-width:100%;*/\n    /* max-height:100%; */\n    position:absolute; left:44px;\n    /* display:;  */\n    /* for now not showing it to try to fix centering issue...*/\n}\n</style>"]}]}