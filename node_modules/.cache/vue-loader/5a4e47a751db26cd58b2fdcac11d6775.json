{"remainingRequest":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/src/components/MapActivation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/src/components/MapActivation.vue","mtime":1639781554698},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mannyfavela/OneDrive/MIT/Thesis Work/mapActivationProject/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKLy9pbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gIi4uL21haW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNYXBBY3RpdmF0aW9uIiwKICBwcm9wczogWyJpbWFnZSIsICJhcnJheSIsICJzaG93QWN0aXZhdGlvbiJdLAogIHdhdGNoOiB7CiAgICAgIHNob3dBY3RpdmF0aW9uOiBmdW5jdGlvbigpewogICAgICAgICAgaWYgKHRoaXMuc2hvd0FjdGl2YXRpb24pewogICAgICAgICAgICAgIHRoaXMuZHJhd0FjdGl2YXRpb24oKTsgCiAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICB0aGlzLmNsZWFyQWN0aXZhdGlvbigpOyAKICAgICAgICAgIH0KICAgICAgfQogIH0sIAogIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICB9LAogIG1ldGhvZHM6IHsgCiAgICBkcmF3X2luaXRpYWxfY29udGVudHMoKXsKICAgICAgICAvL2xldCBwYXBlciA9IHRoaXMucGFwZXI7CiAgICAgICAgbGV0IGltZyA9IHRoaXMuJHJlZnMuaW1hZ2U7IAogICAgICAgIGxldCBjbnYgPSB0aGlzLiRyZWZzLmNhbnZhczsKCgogICAgICAgIC8vIHNpemUgb2YgZWxlbWVudCBvdXRzaWRlCiAgICAgICAgY252LmhlaWdodCA9IGltZy5oZWlnaHQ7CiAgICAgICAgY252LndpZHRoID0gaW1nLndpZHRoOwogICAgICAgIHZhciBhY3RpdmF0aW9uID0gdGhpcy5nZW5lcmF0ZUFycmF5SW1hZ2UodGhpcy5hcnJheSwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTsgCiAgICAgICAgdmFyIGN0eCA9IGNudi5nZXRDb250ZXh0KCcyZCcpCiAgICAgICAgdmFyIGlkYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YShjbnYud2lkdGgsIGNudi5oZWlnaHQpOyAKICAgICAgICBpZGF0YS5kYXRhLnNldChhY3RpdmF0aW9uKTsgCiAgICAgICAgY3R4LnB1dEltYWdlRGF0YShpZGF0YSwgMCwgMCk7ICAKICAgIH0sIAogICAgY2xlYXJBY3RpdmF0aW9uKCl7CiAgICAgICAgbGV0IGNudiA9IHRoaXMuJHJlZnMuY2FudmFzOyAKICAgICAgICB2YXIgY3R4ID0gY252LmdldENvbnRleHQoJzJkJyk7IAogICAgICAgIHZhciBpbWcgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKGNudi53aWR0aCwgY252LmhlaWdodCk7IAogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1nLmRhdGEubGVuZ3RoOyBpKyspewogICAgICAgICAgICBpbWcuZGF0YVtpXSA9IDA7IAogICAgICAgIH0KICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGltZywgMCwgMCk7IAogICAgfSwgCiAgICBkcmF3QWN0aXZhdGlvbigpewogICAgICAgIGxldCBpbWcgPSB0aGlzLiRyZWZzLmltYWdlOwogICAgICAgIGxldCBjbnYgPSB0aGlzLiRyZWZzLmNhbnZhczsgCiAgICAgICAgdmFyIGFjdGl2YXRpb24gPSB0aGlzLmdlbmVyYXRlQXJyYXlJbWFnZSh0aGlzLmFycmF5LCBpbWcud2lkdGgsIGltZy5oZWlnaHQpOyAKICAgICAgICB2YXIgY3R4ID0gY252LmdldENvbnRleHQoJzJkJykKICAgICAgICB2YXIgaWRhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKGNudi53aWR0aCwgY252LmhlaWdodCk7IAogICAgICAgIGlkYXRhLmRhdGEuc2V0KGFjdGl2YXRpb24pOyAKICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGlkYXRhLCAwLCAwKTsgCiAgICB9LCAKICAgIGdlbmVyYXRlQXJyYXlJbWFnZShhcnJheSwgd2lkdGgsIGhlaWdodCl7CiAgICAgICAgdmFyIGFycmF5X3dpZHRoID0gYXJyYXlbMF0ubGVuZ3RoLCAKICAgICAgICBhcnJheV9oZWlnaHQgPSBhcnJheS5sZW5ndGg7IAogICAgICAgIHZhciBkYXRhID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHdpZHRoICogaGVpZ2h0ICogNCk7ICAKICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspewogICAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKXsKICAgICAgICAgICAgICAgIHZhciBwb3MgPSAoeSAqIHdpZHRoICsgeCkgKiA0OyAKICAgICAgICAgICAgICAgIHZhciBhcnJheV94ID0gTWF0aC5mbG9vcih3aWR0aCAvIGFycmF5X3dpZHRoKTsgCiAgICAgICAgICAgICAgICB2YXIgYXJyYXlfeSA9IE1hdGguZmxvb3IoaGVpZ2h0IC8gYXJyYXlfaGVpZ2h0KTsgCiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W01hdGguZmxvb3IoeS9hcnJheV95KV1bTWF0aC5mbG9vcih4IC8gYXJyYXlfeCldCiAgICAgICAgICAgICAgICBkYXRhW3Bvc10gPSAyNTU7IC8vIFNldCB0aGUgY29sb3IgdG8gcmVkCiAgICAgICAgICAgICAgICBkYXRhW3BvcyArIDFdID0gMDsKICAgICAgICAgICAgICAgIGRhdGFbcG9zICsgMl0gPSAwOyAKICAgICAgICAgICAgICAgIGRhdGFbcG9zICsgM10gPSBwYXJzZUludCh0ZW1wICogMjU1KTsgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgaW1hZ2Uuc3JjID0gZGF0YTsgCiAgICAgICAgcmV0dXJuIGRhdGE7IAogICAgfSwKCiAgfSwKfTsK"},{"version":3,"sources":["MapActivation.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MapActivation.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n      <h2>Map Activation Component</h2>\n      <img :class=\"annotator_image_small\" :src=\"image\" ref=\"image\" \n                @load=\"draw_initial_contents\" tabindex='1' @keyup.esc=\"emit('esc')\" />\n        <canvas class=\"annotator_canvas\" ref=\"canvas\" @keyup.esc=\"emit('esc')\" tabindex='2' \n                @mouseover=\"hover(true)\" @mouseleave=\"hover(false)\" />\n  </div>\n</template>\n\n<script>\n//import axios from \"axios\";\n//import { eventBus } from \"../main\";\n\nexport default {\n  name: \"MapActivation\",\n  props: [\"image\", \"array\", \"showActivation\"],\n  watch: {\n      showActivation: function(){\n          if (this.showActivation){\n              this.drawActivation(); \n          } else { \n              this.clearActivation(); \n          }\n      }\n  }, \n  data() {\n    return {};\n  },\n  created: function() {\n  },\n  methods: { \n    draw_initial_contents(){\n        //let paper = this.paper;\n        let img = this.$refs.image; \n        let cnv = this.$refs.canvas;\n\n\n        // size of element outside\n        cnv.height = img.height;\n        cnv.width = img.width;\n        var activation = this.generateArrayImage(this.array, img.width, img.height); \n        var ctx = cnv.getContext('2d')\n        var idata = ctx.createImageData(cnv.width, cnv.height); \n        idata.data.set(activation); \n        ctx.putImageData(idata, 0, 0);  \n    }, \n    clearActivation(){\n        let cnv = this.$refs.canvas; \n        var ctx = cnv.getContext('2d'); \n        var img = ctx.createImageData(cnv.width, cnv.height); \n        for (var i = 0; i < img.data.length; i++){\n            img.data[i] = 0; \n        }\n        ctx.putImageData(img, 0, 0); \n    }, \n    drawActivation(){\n        let img = this.$refs.image;\n        let cnv = this.$refs.canvas; \n        var activation = this.generateArrayImage(this.array, img.width, img.height); \n        var ctx = cnv.getContext('2d')\n        var idata = ctx.createImageData(cnv.width, cnv.height); \n        idata.data.set(activation); \n        ctx.putImageData(idata, 0, 0); \n    }, \n    generateArrayImage(array, width, height){\n        var array_width = array[0].length, \n        array_height = array.length; \n        var data = new Uint8ClampedArray(width * height * 4);  \n        for (var x = 0; x < width; x++){\n            for (var y = 0; y < height; y++){\n                var pos = (y * width + x) * 4; \n                var array_x = Math.floor(width / array_width); \n                var array_y = Math.floor(height / array_height); \n                var temp = array[Math.floor(y/array_y)][Math.floor(x / array_x)]\n                data[pos] = 255; // Set the color to red\n                data[pos + 1] = 0;\n                data[pos + 2] = 0; \n                data[pos + 3] = parseInt(temp * 255); \n            }\n        }\n        var image = document.createElement(\"img\");\n        image.src = data; \n        return data; \n    },\n\n  },\n};\n</script>\n\n<style scoped>\n.annotator_image {\n    /* max-width:100%; */\n    /* max-height:100%; */\n    /* display:inline; */\n    position:relative;\n    object-fit:none; /* never rescale up */ \n}\n.annotator_image_small {\n  width: auto !important;\n  height: auto !important;\n  max-height: 200px;\n  /*max-width: 400px; */\n  object-fit: scale-down; /* never rescale up */ \n}\n.annotator_canvas {\n    /* border:0px solid #d3d3d3; */\n    /* max-width:100%;*/\n    /* max-height:100%; */\n    position:absolute; left:44px;\n    /* display:;  */\n    /* for now not showing it to try to fix centering issue...*/\n}\n</style>"]}]}